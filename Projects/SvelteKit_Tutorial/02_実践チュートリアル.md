# SvelteKit + TypeScript ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«

ã‚¿ã‚°: #sveltekit #typescript #tutorial

---

## ğŸ“‹ ç›®æ¬¡

- [[#1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆã‚’ç†è§£ã™ã‚‹]]
- [[#2. TypeScriptã§å‹ã‚’å®šç¾©ã™ã‚‹]]
- [[#3. ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã®ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ã‚’ä½œã‚‹]]
- [[#4. ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’ä½œã‚‹]]
- [[#5. ä¸€è¦§ãƒšãƒ¼ã‚¸ã‚’ä½œã‚‹ï¼ˆSSR + Form Actionsï¼‰]]
- [[#6. Svelte 5ã®ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã‚’å­¦ã¶]]
- [[#7. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œã‚‹]]
- [[#8. è©³ç´°ãƒšãƒ¼ã‚¸ã‚’ä½œã‚‹ï¼ˆå‹•çš„ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼‰]]
- [[#9. SEOå¯¾å¿œ]]
- [[#10. è¿½åŠ ã§å®Ÿè£…ã™ã‚‹ã¨è‰¯ã„æ©Ÿèƒ½]]
- [[#11. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆï¼ˆæœ€çµ‚å½¢ï¼‰]]
- [[#12. å‚è€ƒãƒªãƒ³ã‚¯]]

---

TODOã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãªãŒã‚‰ã€SvelteKit ã¨ TypeScript ã®åŸºç¤ã‚’å­¦ã³ã¾ã™ã€‚

---

## 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆã‚’ç†è§£ã™ã‚‹

### SvelteKitã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
src/
â”œâ”€â”€ routes/           # ãƒšãƒ¼ã‚¸ã¨APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ +layout.svelte    # å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”œâ”€â”€ +page.svelte      # ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆ/ï¼‰
â”‚   â”œâ”€â”€ +page.server.ts   # ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰å‡¦ç†
â”‚   â”œâ”€â”€ [id]/             # å‹•çš„ãƒ«ãƒ¼ãƒˆï¼ˆ/xxxï¼‰
â”‚   â”‚   â”œâ”€â”€ +page.svelte
â”‚   â”‚   â””â”€â”€ +page.server.ts
â”‚   â”œâ”€â”€ about/            # é™çš„ãƒ«ãƒ¼ãƒˆï¼ˆ/aboutï¼‰
â”‚   â”‚   â””â”€â”€ +page.svelte
â”‚   â””â”€â”€ api/              # APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚       â””â”€â”€ todos/
â”‚           â””â”€â”€ +server.ts
â”œâ”€â”€ lib/              # å…±æœ‰ã‚³ãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ types.ts          # å‹å®šç¾©
â”‚   â”œâ”€â”€ constants.ts      # å®šæ•°
â”‚   â””â”€â”€ server/           # ã‚µãƒ¼ãƒãƒ¼å°‚ç”¨ã‚³ãƒ¼ãƒ‰
â”‚       â”œâ”€â”€ todos-store.ts
â”‚       â””â”€â”€ data/
â”‚           â””â”€â”€ todo.json
â”œâ”€â”€ app.html          # HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â””â”€â”€ app.d.ts          # å‹å®šç¾©ï¼ˆSvelteKitç”¨ï¼‰
```

### ãƒ•ã‚¡ã‚¤ãƒ«å‘½åè¦å‰‡

| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² |
|---------|------|
| `+page.svelte` | ãƒšãƒ¼ã‚¸ã®UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ |
| `+page.server.ts` | ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰å‡¦ç†ï¼ˆloadé–¢æ•°ã€form actionsï¼‰ |
| `+layout.svelte` | å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆãƒ˜ãƒƒãƒ€ãƒ¼ã€ãƒ•ãƒƒã‚¿ãƒ¼ç­‰ï¼‰ |
| `+server.ts` | APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆREST APIï¼‰ |
| `+error.svelte` | ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ |

### å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ

- `+` ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã¯SvelteKitã®ç‰¹åˆ¥ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¤ºã™
- `[id]` ã¯URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹å‹•çš„ãƒ«ãƒ¼ãƒˆ
- `lib/server/` é…ä¸‹ã¯ã‚µãƒ¼ãƒãƒ¼ã§ã®ã¿å®Ÿè¡Œã•ã‚Œã‚‹ï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ã¯ãƒãƒ³ãƒ‰ãƒ«ã•ã‚Œãªã„ï¼‰

---

## 2. TypeScriptã§å‹ã‚’å®šç¾©ã™ã‚‹

### `src/lib/types.ts`

```typescript
// unionã¯ã€`type`ã˜ã‚ƒãªã„ã¨å®šç¾©ã§ããªã„
// export type TodoStatus = "pending" | "completed";

// ç¶™æ‰¿ã¯è€ƒãˆã¦ã„ãªã„ã®ã§typeã§ã„ã„
export type Todo = {
  id: string;
  task: string;
  completed: boolean;
  created_at: string;
};
```

### å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ

#### `type` vs `interface`

| ç‰¹å¾´ | `type` | `interface` |
|-----|--------|-------------|
| Unionå‹ | âœ… `type Status = "a" \| "b"` | âŒ |
| ç¶™æ‰¿ | `&` ã§äº¤å·®å‹ | `extends` ã§ç¶™æ‰¿ |
| å®£è¨€ãƒãƒ¼ã‚¸ | âŒ | âœ… |
| ä½¿ã„åˆ†ã‘ | ãƒ‡ãƒ¼ã‚¿å‹ã€Union | ã‚¯ãƒ©ã‚¹ã€æ‹¡å¼µãŒå¿…è¦ãªå ´åˆ |

#### ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å‹

```typescript
// Omit: ç‰¹å®šã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’é™¤å¤–ã—ãŸå‹ã‚’ä½œã‚‹
type TodoCreateInput = Omit<Todo, "id" | "created_at" | "completed">;
// â†’ { task: string } ã ã‘ã®å‹ã«ãªã‚‹

// Pick: ç‰¹å®šã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã ã‘ã‚’æŠ½å‡ºã—ãŸå‹ã‚’ä½œã‚‹
type TodoId = Pick<Todo, "id">;
// â†’ { id: string } ã ã‘ã®å‹ã«ãªã‚‹

// Partial: ã™ã¹ã¦ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ã«ã™ã‚‹
type TodoUpdate = Partial<Todo>;
// â†’ { id?: string; task?: string; ... }
```

---

## 3. ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã®ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ã‚’ä½œã‚‹

### `src/lib/constants.ts`

```typescript
import { fileURLToPath } from "url";
import { dirname, resolve } from "path";

const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);

/**
 * ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã®ãƒ‘ã‚¹
 * process.cwd() ã¯å®Ÿè¡Œå ´æ‰€ã«ã‚ˆã£ã¦å¤‰ã‚ã‚‹ãŸã‚ã€import.meta.url ã‚’ä½¿ã†
 */
export const PROJECT_ROOT = resolve(__dirname, "../..");
```

### `src/lib/server/todos-store.ts`

```typescript
import { readFile, writeFile } from "fs/promises";
import { join } from "path";
import { PROJECT_ROOT } from "$lib/constants";
import type { Todo } from "$lib/types";

const DATA_FILE_PATH = join(PROJECT_ROOT, "src/lib/server/data/todo.json");

export async function getTodos(): Promise<Todo[]> {
  try {
    const data = await readFile(DATA_FILE_PATH, "utf-8");
    const json = JSON.parse(data);
    return json.todos || [];
  } catch (error) {
    console.error("Failed to read todos from file:", error);
    return [];
  }
}

// å‹: Todoã‹ã‚‰ã€é™¤å¤–æŒ‡å®šã—ã¦å‹ã‚’ä½œã‚‹
type TodoCreateInput = Omit<Todo, "id" | "created_at" | "completed">;

export async function createTodo(input: TodoCreateInput): Promise<Todo> {
  const todos = await getTodos();
  const newTodo: Todo = {
    id: crypto.randomUUID(),
    task: input.task,
    completed: false,
    created_at: new Date().toISOString(),
  };
  todos.push(newTodo);
  await writeFile(DATA_FILE_PATH, JSON.stringify({ todos }, null, 2));
  return newTodo;
}

export async function getTodoById(id: string): Promise<Todo | null> {
  const todos = await getTodos();
  return todos.find((t) => t.id === id) || null;
}

export async function deleteTodo(id: string): Promise<boolean> {
  const todos = await getTodos();
  const index = todos.findIndex((t) => t.id === id);
  if (index === -1) return false;

  todos.splice(index, 1);
  await writeFile(DATA_FILE_PATH, JSON.stringify({ todos }, null, 2));
  return true;
}
```

### å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ

- `$lib` ã¯SvelteKitã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã§ `src/lib` ã‚’æŒ‡ã™
- `lib/server/` é…ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã¯ã‚µãƒ¼ãƒãƒ¼ã§ã®ã¿å®Ÿè¡Œã•ã‚Œã‚‹
- `fs/promises` ã‚’ä½¿ã£ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿æ›¸ãï¼ˆå®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯DBã‚’ä½¿ã†ï¼‰

---

## 4. ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’ä½œã‚‹

### `src/routes/+layout.svelte`

```svelte
<script lang="ts">
  import "./layout.css";
  import favicon from "$lib/assets/favicon.svg";
  import { page } from "$app/state";

  let { children } = $props();

  const navItems = [
    { href: "/", label: "TODOãƒªã‚¹ãƒˆ" },
    { href: "/about", label: "About" },
  ];

  function isActive(path: string): boolean {
    if (path === "/") return page.url.pathname === "/";
    return page.url.pathname.startsWith(path);
  }
</script>

<svelte:head>
  <link rel="icon" href={favicon} />
</svelte:head>

<div class="flex min-h-screen flex-col">
  <header>
    <nav>
      {#each navItems as item}
        <a
          href={item.href}
          class="{isActive(item.href) ? 'active' : ''}">
          {item.label}
        </a>
      {/each}
    </nav>
  </header>

  <main>
    {@render children()}
  </main>

  <footer>
    <p>&copy; {new Date().getFullYear()} SvelteKit Tutorial</p>
  </footer>
</div>
```

### å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ

- `+layout.svelte` ã¯é…ä¸‹ã®ã™ã¹ã¦ã®ãƒšãƒ¼ã‚¸ã«é©ç”¨ã•ã‚Œã‚‹
- `{@render children()}` ã§ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æç”»ï¼ˆSvelte 5ã®è¨˜æ³•ï¼‰
- `$app/state` ã‹ã‚‰ç¾åœ¨ã®ãƒšãƒ¼ã‚¸æƒ…å ±ã‚’å–å¾—
- `<svelte:head>` ã§HTMLã® `<head>` ã«è¦ç´ ã‚’è¿½åŠ 

---

## 5. ä¸€è¦§ãƒšãƒ¼ã‚¸ã‚’ä½œã‚‹ï¼ˆSSR + Form Actionsï¼‰

### `src/routes/+page.server.ts`

```typescript
import type { Actions, PageServerLoad } from "./$types";
import { createTodo, deleteTodo, getTodos } from "$lib/server/todos-store";

// loadé–¢æ•°: ãƒšãƒ¼ã‚¸è¡¨ç¤ºæ™‚ã«ã‚µãƒ¼ãƒãƒ¼ã§ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
export const load: PageServerLoad = async () => {
  const todos = await getTodos();
  // é‡è¦: ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã™ï¼ˆé…åˆ—ã‚’ç›´æ¥è¿”ã™ã“ã¨ã¯ã§ããªã„ï¼‰
  return { todos };
};

// Form Actions: ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã‚’å‡¦ç†
export const actions: Actions = {
  create: async ({ request }) => {
    const formData = await request.formData();
    const task = formData.get("task")?.toString().trim();

    if (!task) return { error: "ã‚¿ã‚¹ã‚¯ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" };

    const newTodo = await createTodo({ task });
    return { success: true, newTodo };
  },

  delete: async ({ request }) => {
    const formData = await request.formData();
    const id = formData.get("id")?.toString();

    if (!id) return { error: "IDãŒå¿…è¦ã§ã™" };

    const result = await deleteTodo(id);
    return { success: result };
  },
};
```

### `src/routes/+page.svelte`

```svelte
<script lang="ts">
  import type { PageProps } from "./$types";
  import { enhance } from "$app/forms";
  import type { Todo } from "$lib/types";

  let { data }: PageProps = $props();
</script>

<!-- use:enhance ã§JavaScriptã«ã‚ˆã‚‹ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ï¼ˆãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰ãªã—ï¼‰ -->
<form method="POST" action="?/create" use:enhance>
  <input type="text" name="task" placeholder="æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’å…¥åŠ›..." required />
  <button type="submit">è¿½åŠ </button>
</form>

<ul>
  {#each data.todos as todo}
    <li>
      <span>{todo.task}</span>
      
      <!-- å‰Šé™¤ãƒ•ã‚©ãƒ¼ãƒ  -->
      <form method="POST" action="?/delete" use:enhance>
        <input type="hidden" name="id" value={todo.id} />
        <button type="submit">å‰Šé™¤</button>
      </form>
    </li>
  {/each}
</ul>
```

### å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ

#### SSRï¼ˆã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼‰

```
1. ãƒ–ãƒ©ã‚¦ã‚¶ãŒãƒšãƒ¼ã‚¸ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
2. ã‚µãƒ¼ãƒãƒ¼ã§ load é–¢æ•°ãŒå®Ÿè¡Œã•ã‚Œã‚‹
3. ãƒ‡ãƒ¼ã‚¿ãŒå«ã¾ã‚ŒãŸHTMLãŒç”Ÿæˆã•ã‚Œã‚‹
4. ãƒ–ãƒ©ã‚¦ã‚¶ã«HTMLãŒè¿”ã•ã‚Œã‚‹ï¼ˆSEOã«æœ‰åˆ©ï¼‰
```

#### Form Actions

| è¦ç´  | èª¬æ˜ |
|-----|------|
| `method="POST"` | HTMLãƒ•ã‚©ãƒ¼ãƒ ã®æ¨™æº– |
| `action="?/create"` | å®Ÿè¡Œã™ã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å |
| `use:enhance` | JavaScriptã«ã‚ˆã‚‹é€ä¿¡ï¼ˆãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰ãªã—ï¼‰ |

#### ãªãœ `DELETE` ã§ã¯ãªã `POST` ã‹ï¼Ÿ

HTMLãƒ•ã‚©ãƒ¼ãƒ ã¯ `GET` ã¨ `POST` ã®ã¿ã‚µãƒãƒ¼ãƒˆã€‚ã‚¢ã‚¯ã‚·ãƒ§ãƒ³åï¼ˆ`?/delete`ï¼‰ã§æ“ä½œã‚’åŒºåˆ¥ã™ã‚‹ã€‚

---

## 6. Svelte 5ã®ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã‚’å­¦ã¶

### åŸºæœ¬çš„ãªãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–å¤‰æ•°

```svelte
<script lang="ts">
  import type { PageProps } from "./$types";
  import type { Todo } from "$lib/types";

  let { data }: PageProps = $props();

  // $state: ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªçŠ¶æ…‹ã‚’ä½œã‚‹
  type FilterStatus = "all" | "completed" | "pending";
  let filterStatus = $state<FilterStatus>("all");

  // $state: ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ãƒ¼ã‚«ãƒ«çŠ¶æ…‹ã¨ã—ã¦ä¿æŒ
  let todos = $state<Todo[]>([]);

  // $effect: å‰¯ä½œç”¨ã‚’å®Ÿè¡Œï¼ˆdata.todosãŒå¤‰ã‚ã£ãŸã‚‰åŒæœŸï¼‰
  $effect(() => {
    todos = data.todos;
  });

  // $derived.by: æ´¾ç”Ÿå€¤ã‚’è¨ˆç®—ï¼ˆè¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯ã®å ´åˆï¼‰
  let filteredTodos = $derived.by(() => {
    // é‡è¦: å…ƒã®é…åˆ—ã‚’å¤‰æ›´ã—ãªã„ã‚ˆã†ã«ã‚³ãƒ”ãƒ¼ã‚’ä½œã‚‹
    let result = [...todos];

    if (filterStatus === "completed") {
      result = result.filter((todo) => todo.completed);
    } else if (filterStatus === "pending") {
      result = result.filter((todo) => !todo.completed);
    }

    // sort() ã¯ç ´å£Šçš„ãƒ¡ã‚½ãƒƒãƒ‰ãªã®ã§ã‚³ãƒ”ãƒ¼ãŒå¿…è¦
    result.sort((a, b) => {
      const dateA = new Date(a.created_at).getTime();
      const dateB = new Date(b.created_at).getTime();
      return dateB - dateA; // æ–°ã—ã„é †
    });

    return result;
  });

  // ãƒ‡ãƒãƒƒã‚°ç”¨: å€¤ã®å¤‰åŒ–ã‚’ç›£è¦–
  $inspect(todos);
</script>
```

### å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ

| Rune | ç”¨é€” | ä¾‹ |
|------|------|-----|
| `$state` | ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªçŠ¶æ…‹ | `let count = $state(0)` |
| `$derived` | å˜ç´”ãªæ´¾ç”Ÿå€¤ | `let double = $derived(count * 2)` |
| `$derived.by` | è¤‡é›‘ãªæ´¾ç”Ÿå€¤ | `let filtered = $derived.by(() => {...})` |
| `$effect` | å‰¯ä½œç”¨ã®å®Ÿè¡Œ | `$effect(() => { console.log(count) })` |
| `$props` | è¦ªã‹ã‚‰ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | `let { data } = $props()` |
| `$inspect` | ãƒ‡ãƒãƒƒã‚°ç”¨ç›£è¦– | `$inspect(todos)` |

#### é…åˆ—ã®ã‚³ãƒ”ãƒ¼ãŒå¿…è¦ãªç†ç”±

```javascript
let result = todos;      // âŒ åŒã˜é…åˆ—ã‚’å‚ç…§
result.sort(...);        // å…ƒã® todos ã‚‚å¤‰æ›´ã•ã‚Œã‚‹ï¼

let result = [...todos]; // âœ… æ–°ã—ã„é…åˆ—ã‚’ä½œæˆ
result.sort(...);        // todos ã¯å½±éŸ¿ã‚’å—ã‘ãªã„
```

---

## 7. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œã‚‹

### `src/routes/FilterButton.svelte`

```svelte
<script lang="ts">
  // 0. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å¯¾å¿œãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å®šç¾©
  type Variant = "all" | "pending" | "completed";
  const config = {
    all: { label: "ã™ã¹ã¦", activeClass: "bg-indigo-600 border-indigo-600" },
    pending: { label: "æœªå®Œäº†", activeClass: "bg-yellow-500 border-yellow-500" },
    completed: { label: "å®Œäº†", activeClass: "bg-green-600 border-green-600" },
  };

  // 1. Propsã®å‹ã‚’å®šç¾©
  type Props = {
    variant: Variant;
    active?: boolean;     // ?ã‚’ä»˜ã‘ã‚‹ã¨ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«
    onclick?: () => void;
  };

  // 2. propsã‚’å—ã‘å–ã‚‹
  let { variant, active = false, onclick }: Props = $props();

  // 3. propsã‹ã‚‰æ´¾ç”Ÿå€¤ã‚’ä½œã‚‹å ´åˆã¯$derivedã‚’ä½¿ã†
  //    constã§ç›´æ¥ä»£å…¥ã™ã‚‹ã¨ã€åˆæœŸå€¤ã—ã‹ã‚­ãƒ£ãƒ—ãƒãƒ£ã•ã‚Œãªã„
  let label = $derived(config[variant].label);
  let activeClass = $derived(config[variant].activeClass);

  const baseClass = "px-3 py-1.5 rounded-md text-sm font-medium transition border";
</script>

<button
  type="button"
  {onclick}
  class="{baseClass} {active ? `${activeClass} text-white` : 'bg-white text-gray-700'}">
  {label}
</button>
```

### ä½¿ç”¨ä¾‹

```svelte
<FilterButton
  variant="all"
  active={filterStatus === "all"}
  onclick={() => (filterStatus = "all")} />
```

### å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ

#### propsã®åˆæœŸå€¤ã‚­ãƒ£ãƒ—ãƒãƒ£å•é¡Œ

```typescript
// âŒ åˆæœŸå€¤ã—ã‹ã‚­ãƒ£ãƒ—ãƒãƒ£ã•ã‚Œãªã„
const { label } = config[variant];

// âœ… variantãŒå¤‰ã‚ã‚‹ãŸã³ã«å†è¨ˆç®—ã•ã‚Œã‚‹
let label = $derived(config[variant].label);
```

#### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆã®åˆ¤æ–­

| çŠ¶æ³ | æ¨å¥¨ |
|-----|------|
| 2ã¤ã®ä¼¼ãŸãƒœã‚¿ãƒ³ã€è¦ç´ ã‚¿ã‚¤ãƒ—ãŒç•°ãªã‚‹ | ã‚¯ãƒ©ã‚¹ã‚’å¤‰æ•°ã«ã¾ã¨ã‚ã‚‹ |
| 3ã¤ä»¥ä¸Šã®åŒã˜æ§‹é€  | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ or `{#each}` |
| ç‰¹å®šç”¨é€”ã«ç‰¹åŒ– | variant + å†…éƒ¨ã§configç®¡ç† |
| æ±ç”¨çš„ã«ä½¿ã„ãŸã„ | props ã§ãƒ©ãƒ™ãƒ«ãƒ»è‰²ã‚’å—ã‘å–ã‚‹ |

---

## 8. è©³ç´°ãƒšãƒ¼ã‚¸ã‚’ä½œã‚‹ï¼ˆå‹•çš„ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼‰

### `src/routes/[id]/+page.server.ts`

```typescript
import { error } from "@sveltejs/kit";
import { getTodoById } from "$lib/server/todos-store";
import type { PageServerLoad } from "./$types";

export const load: PageServerLoad = async ({ params }) => {
  // params.id ã§URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å–å¾—
  const todo = await getTodoById(params.id);

  // è¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯404ã‚¨ãƒ©ãƒ¼
  if (!todo) {
    throw error(404, {
      message: "TODOãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“",
    });
  }

  return {
    todo,
    meta: {
      title: `${todo.task} | TODOè©³ç´°`,
      description: `ã‚¿ã‚¹ã‚¯ã€Œ${todo.task}ã€ã®è©³ç´°ãƒšãƒ¼ã‚¸ã§ã™ã€‚`,
    },
  };
};
```

### `src/routes/[id]/+page.svelte`

```svelte
<script lang="ts">
  import type { PageProps } from "./$types";

  let { data }: PageProps = $props();
</script>

<svelte:head>
  <title>{data.meta.title}</title>
  <meta name="description" content={data.meta.description} />
</svelte:head>

<article>
  <!-- ãƒ‘ãƒ³ããšãƒªã‚¹ãƒˆ -->
  <nav>
    <a href="/">Home</a> / TODOè©³ç´°
  </nav>

  <h1>{data.todo.task}</h1>
  
  <dl>
    <dt>ID</dt>
    <dd>{data.todo.id}</dd>
    
    <dt>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</dt>
    <dd>{data.todo.completed ? "å®Œäº†" : "æœªå®Œäº†"}</dd>
    
    <dt>ä½œæˆæ—¥æ™‚</dt>
    <dd>
      {new Date(data.todo.created_at).toLocaleString("ja-JP")}
    </dd>
  </dl>

  <a href="/">â† ä¸€è¦§ã«æˆ»ã‚‹</a>
</article>
```

### å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ

- `[id]` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã§URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£
- `params.id` ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹
- `throw error(404, {...})` ã§ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ã‚’è¡¨ç¤º
- SSRã§ `<title>` ã‚’å‹•çš„ã«è¨­å®šï¼ˆSEOã«é‡è¦ï¼‰

---

## 9. SEOå¯¾å¿œ

### `<svelte:head>` ã®ä½¿ã„æ–¹

```svelte
<svelte:head>
  <title>ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ« | ã‚µã‚¤ãƒˆå</title>
  <meta name="description" content="ãƒšãƒ¼ã‚¸ã®èª¬æ˜æ–‡" />
  
  <!-- OGP: SNSã‚·ã‚§ã‚¢ç”¨ -->
  <meta property="og:title" content="ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«" />
  <meta property="og:description" content="ãƒšãƒ¼ã‚¸ã®èª¬æ˜æ–‡" />
  <meta property="og:type" content="website" />
</svelte:head>
```

### è¡¨ç¤ºã•ã‚Œã‚‹å ´æ‰€

| è¦ç´  | è¡¨ç¤ºå ´æ‰€ |
|-----|---------|
| `<title>` | ãƒ–ãƒ©ã‚¦ã‚¶ã‚¿ãƒ–ã€æ¤œç´¢çµæœã®ã‚¿ã‚¤ãƒˆãƒ« |
| `description` | æ¤œç´¢çµæœã®èª¬æ˜æ–‡ |
| `og:*` | X/Facebookç­‰ã§ã‚·ã‚§ã‚¢ã—ãŸã¨ãã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ |

### SSRãŒé‡è¦ãªç†ç”±

SSRã§ã¯ã€HTMLãŒç”Ÿæˆã•ã‚ŒãŸæ™‚ç‚¹ã§ `<head>` ã«ãƒ¡ã‚¿æƒ…å ±ãŒå«ã¾ã‚Œã‚‹ãŸã‚ï¼š
- âœ… Googleã®ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼ãŒæ­£ã—ãèª­ã¿å–ã‚Œã‚‹
- âœ… SNSã®ãƒœãƒƒãƒˆãŒã‚·ã‚§ã‚¢ç”¨æƒ…å ±ã‚’å–å¾—ã§ãã‚‹

CSRï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼‰ã ã¨JavaScriptå®Ÿè¡Œå¾Œã¾ã§ `<title>` ãŒç©ºã«ãªã‚ŠSEOã«ä¸åˆ©ã€‚

---

## 10. è¿½åŠ ã§å®Ÿè£…ã™ã‚‹ã¨è‰¯ã„æ©Ÿèƒ½

### åˆç´š

| æ©Ÿèƒ½ | å­¦ã¹ã‚‹ã“ã¨ |
|-----|----------|
| ã‚¿ã‚¹ã‚¯ç·¨é›† | Form Actionsã®å¿œç”¨ã€å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ |
| å®Œäº†åˆ‡ã‚Šæ›¿ãˆã®ã‚µãƒ¼ãƒãƒ¼åŒæœŸ | APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆ`+server.ts`ï¼‰ã€`fetch` |
| ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º | `{#await}` ãƒ–ãƒ­ãƒƒã‚¯ã€`$navigating` |

### ä¸­ç´š

| æ©Ÿèƒ½ | å­¦ã¹ã‚‹ã“ã¨ |
|-----|----------|
| èªè¨¼ï¼ˆãƒ­ã‚°ã‚¤ãƒ³ï¼‰ | Cookiesã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã€`hooks.server.ts` |
| è¤‡æ•°ãƒªã‚¹ãƒˆç®¡ç† | ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ã€ãƒã‚¹ãƒˆã—ãŸãƒ«ãƒ¼ãƒˆ |
| æ¥½è¦³çš„UIæ›´æ–° | `use:enhance` ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º |
| ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° | `+error.svelte`ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¨ãƒ©ãƒ¼å‡¦ç† |

### ä¸Šç´š

| æ©Ÿèƒ½ | å­¦ã¹ã‚‹ã“ã¨ |
|-----|----------|
| ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ | WebSocketã€Server-Sent Events |
| ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ä¸¦ã³æ›¿ãˆ | Svelteã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆ`use:action`ï¼‰ |
| ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œï¼ˆPWAï¼‰ | Service Workerã€`manifest.json` |
| ãƒ†ã‚¹ãƒˆ | Playwrightï¼ˆE2Eï¼‰ã€Vitestï¼ˆUnitï¼‰ |
| å›½éš›åŒ–ï¼ˆi18nï¼‰ | `paraglide-js`ã€å‹•çš„ãƒ­ã‚±ãƒ¼ãƒ«åˆ‡ã‚Šæ›¿ãˆ |

---

## 11. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆï¼ˆæœ€çµ‚å½¢ï¼‰

```
src/
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ +layout.svelte         # å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”œâ”€â”€ +page.svelte           # ä¸€è¦§ãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ +page.server.ts        # ä¸€è¦§ã®SSR + Form Actions
â”‚   â”œâ”€â”€ FilterButton.svelte    # ãƒ•ã‚£ãƒ«ã‚¿ãƒœã‚¿ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ layout.css             # ã‚°ãƒ­ãƒ¼ãƒãƒ«CSS
â”‚   â”œâ”€â”€ [id]/
â”‚   â”‚   â”œâ”€â”€ +page.svelte       # è©³ç´°ãƒšãƒ¼ã‚¸
â”‚   â”‚   â””â”€â”€ +page.server.ts    # è©³ç´°ã®SSR
â”‚   â”œâ”€â”€ about/
â”‚   â”‚   â””â”€â”€ +page.svelte       # Aboutãƒšãƒ¼ã‚¸
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ todos/
â”‚           â””â”€â”€ +server.ts     # REST APIï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ types.ts               # å‹å®šç¾©
â”‚   â”œâ”€â”€ constants.ts           # å®šæ•°
â”‚   â””â”€â”€ server/
â”‚       â”œâ”€â”€ todos-store.ts     # ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢
â”‚       â””â”€â”€ data/
â”‚           â””â”€â”€ todo.json      # ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ app.html
â””â”€â”€ app.d.ts
```

---

## 12. å‚è€ƒãƒªãƒ³ã‚¯

- [SvelteKit å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://kit.svelte.dev/docs)
- [Svelte 5 ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£](https://svelte.dev/docs/svelte/$state)
- [TypeScript ãƒãƒ³ãƒ‰ãƒ–ãƒƒã‚¯](https://www.typescriptlang.org/docs/handbook/)

