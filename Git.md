# Git ã‚³ãƒãƒ³ãƒ‰é›†

ã‚¿ã‚°: #git #cheatsheet

---

## ğŸ“‹ ç›®æ¬¡

- [[#åŸºæœ¬æ“ä½œ]]
- [[#ãƒ–ãƒ©ãƒ³ãƒæ“ä½œ]]
- [[#ã‚³ãƒŸãƒƒãƒˆæ“ä½œ]]
- [[#ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°æ“ä½œ]]
- [[#ãƒªã‚»ãƒƒãƒˆæ“ä½œ]]
- [[#Revertæ“ä½œ]]
- [[#Stashæ“ä½œ]]
- [[#Mergeæ“ä½œ]]
- [[#Rebaseæ“ä½œ]]
- [[#ãã®ä»–ã®ä¾¿åˆ©ãªã‚³ãƒãƒ³ãƒ‰]]

---

## åŸºæœ¬æ“ä½œ

### ãƒªãƒ¢ãƒ¼ãƒˆç¢ºèª

```bash
git remote -v  # ã‚ªãƒªã‚¸ãƒ³ç¢ºèª
```

### èªè¨¼è¨­å®š

```bash
# ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹
git config --global credential.helper cache
```

---

## ãƒ–ãƒ©ãƒ³ãƒæ“ä½œ

### ãƒ–ãƒ©ãƒ³ãƒä¸€è¦§ãƒ»ç¢ºèª

```bash
git branch              # ãƒ­ãƒ¼ã‚«ãƒ«ãƒ–ãƒ©ãƒ³ãƒä¸€è¦§
git branch -r           # ãƒªãƒ¢ãƒ¼ãƒˆãƒ–ãƒ©ãƒ³ãƒä¸€è¦§
git branch -vv          # Upstreamç¢ºèª
git branch -D <branch>  # ãƒ–ãƒ©ãƒ³ãƒå‰Šé™¤
```

### ãƒ–ãƒ©ãƒ³ãƒä½œæˆãƒ»åˆ‡ã‚Šæ›¿ãˆ

```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ
git checkout -b <new-branch> <base-branch>

# ãƒªãƒ¢ãƒ¼ãƒˆãƒ–ãƒ©ãƒ³ãƒã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«å–ã‚Šè¾¼ã‚€
git fetch origin <remote-branch>
git checkout -b <local-branch> origin/<remote-branch>
```

### ãƒ–ãƒ©ãƒ³ãƒåå¤‰æ›´

```bash
git branch -m <old-name> <new-name>
```

### ãƒ­ãƒ¼ã‚«ãƒ«ãƒ–ãƒ©ãƒ³ãƒã‚’ãƒªãƒ¢ãƒ¼ãƒˆã«ãƒ—ãƒƒã‚·ãƒ¥

```bash
git checkout -b <new-branch> <main>
git push -u origin <new-branch>
```

### ãƒ–ãƒ©ãƒ³ãƒé–“ã®å·®åˆ†ç¢ºèª

```bash
git diff <branchA> <branchB>
git diff origin/<remote-branch>  # ãƒªãƒ¢ãƒ¼ãƒˆãƒ–ãƒ©ãƒ³ãƒã¨ã®å·®åˆ†
```

### æ´¾ç”Ÿå…ƒç¢ºèª

```bash
git show-branch | grep '*' | grep -v "$(git rev-parse --abbrev-ref HEAD)" | head -1 | awk -F'[]~^[]' '{print $2}'
```

### ãƒ­ãƒ¼ã‚«ãƒ«ãƒ–ãƒ©ãƒ³ãƒã®æƒé™¤

```bash
# ãƒªãƒ¢ãƒ¼ãƒˆã§å‰Šé™¤ã•ã‚ŒãŸãƒ–ãƒ©ãƒ³ãƒã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã‹ã‚‰ã‚‚å‰Šé™¤
git fetch --prune && git branch -vv | grep ': gone]' | awk '{print $1}' | xargs -p -n 1 git branch -D
```

---

## ã‚³ãƒŸãƒƒãƒˆæ“ä½œ

### ã‚³ãƒŸãƒƒãƒˆæ•°ç¢ºèª

```bash
git rev-list --count
```

---

## ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°æ“ä½œ

### ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°å–ã‚Šæ¶ˆã—

```bash
git reset HEAD          # å…¨éƒ¨å–ã‚Šæ¶ˆã—
git reset HEAD <file>   # ç‰¹å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿
```

### ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰å‰Šé™¤

```bash
# .gitignoreã«è¿½åŠ ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½è·¡ã‹ã‚‰å¤–ã™
git rm -r --cached . && git add .
```

---

## ãƒªã‚»ãƒƒãƒˆæ“ä½œ

### ã‚³ãƒŸãƒƒãƒˆå–ã‚Šæ¶ˆã—

```bash
# ç›´å‰ã®ã‚³ãƒŸãƒƒãƒˆã‚’å–ã‚Šæ¶ˆã—ï¼ˆå¤‰æ›´ã¯æ®‹ã‚‹ï¼‰
git reset --soft HEAD^

# ç‰¹å®šã®ã‚³ãƒŸãƒƒãƒˆIDã«æˆ»ã™
git reset --hard <commit-id>

# 1ã¤å‰ã®ã‚³ãƒŸãƒƒãƒˆã‚’ã‚¯ãƒªã‚¢
git reset --hard HEAD~1

# ORIG_HEADã«æˆ»ã™ï¼ˆç›´å‰ã®æ“ä½œã‚’å–ã‚Šæ¶ˆã™ï¼‰
git reset --hard ORIG_HEAD
```

> âš ï¸ **è­¦å‘Š**: `git reset --hard`ã¯å¤‰æ›´ã‚’å®Œå…¨ã«å‰Šé™¤ã—ã¾ã™ã€‚ä¸€åº¦pushãªã©ã‚’è¡Œã£ã¦ã€ã»ã‹ã®é–‹ç™ºè€…ã«å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã‚³ãƒŸãƒƒãƒˆã‚’å–ã‚Šæ¶ˆã™ã“ã¨ã¯çµ¶å¯¾ã«ã—ã¦ã¯ã„ã‘ã¾ã›ã‚“ã€‚

### ãƒªãƒ¢ãƒ¼ãƒˆã«é–“é•ã£ãŸã‚³ãƒŸãƒƒãƒˆã‚’pushã—ã¦ã—ã¾ã£ãŸå ´åˆ

```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ã§ã‚³ãƒŸãƒƒãƒˆã‚’å–ã‚Šæ¶ˆã—
git reset --hard HEAD~1

# ãƒªãƒ¢ãƒ¼ãƒˆã«å¼·åˆ¶ãƒ—ãƒƒã‚·ãƒ¥ï¼ˆæ³¨æ„ï¼šãƒãƒ¼ãƒ é–‹ç™ºã§ã¯é¿ã‘ã‚‹ã¹ãï¼‰
git push origin <branch-name> --force
```

> âš ï¸ **æ³¨æ„**: `--force`ã‚’ä½¿ã†ã¨ã€ãƒªãƒ¢ãƒ¼ãƒˆã®å±¥æ­´ãŒæ›¸ãæ›ã‚ã‚Šã¾ã™ã€‚ãƒãƒ¼ãƒ é–‹ç™ºã§ã¯çµ¶å¯¾ã«é¿ã‘ã¾ã—ã‚‡ã†ã€‚

---

## Revertæ“ä½œ

### ç‰¹å®šã®ã‚³ãƒŸãƒƒãƒˆã‚’å–ã‚Šæ¶ˆã™

```bash
git revert <commit-id>
```

> âš ï¸ **æ³¨æ„ç‚¹**:
>
> - ãƒãƒ¼ã‚¸ã—ãŸäº‹å®Ÿã¯æ¶ˆãˆãªã„
> - ãã®ãƒ–ãƒ©ãƒ³ãƒã‚’å†åº¦ãƒãƒ¼ã‚¸ã—ã¦ã‚‚ã€å–ã‚Šè¾¼ã¿ãŒç™ºç”Ÿã—ãªã„
> - ãã®å ´åˆã¯æ–°ã—ããƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆã—ã¦ãƒãƒ¼ã‚¸ã™ã‚‹

---

## Stashæ“ä½œ

### åŸºæœ¬çš„ãªStashæ“ä½œ

```bash
git stash                    # å¤‰æ›´ã‚’ä¸€æ™‚ä¿å­˜
git stash list               # ä¿å­˜æ¸ˆã¿ã®ä¸€è¦§
git stash apply              # æœ€æ–°ã®stashã‚’é©ç”¨ï¼ˆstashã¯æ®‹ã‚‹ï¼‰
git stash pop                # æœ€æ–°ã®stashã‚’é©ç”¨ã—ã¦å‰Šé™¤
git stash clear              # ã™ã¹ã¦ã®stashã‚’å‰Šé™¤
```

### ç‰¹å®šã®Stashæ“ä½œ

```bash
git stash list --date=local                    # æ—¥ä»˜ä»˜ãã§ä¸€è¦§è¡¨ç¤º
git stash pop stash@{N}                        # ç‰¹å®šã®stashã‚’é©ç”¨ã—ã¦å‰Šé™¤
git stash drop stash@{N}                       # ç‰¹å®šã®stashã‚’å‰Šé™¤
git diff stash@{0}                             # stashã¨ã®å·®åˆ†ç¢ºèª
```

### ãƒ•ã‚¡ã‚¤ãƒ«æŒ‡å®šã§Stash

```bash
# ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿stash
git stash push -m "stash name" -- <filepath>

# æœªè¿½è·¡ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚å«ã‚ã‚‹
git stash save -u "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸"
```

---

## Mergeæ“ä½œ

### ãƒãƒ¼ã‚¸å®Ÿè¡Œ

```bash
# ãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆã‚’å¿…ãšæ®‹ã™ï¼ˆFast Forwardã‚’é¿ã‘ã‚‹ï¼‰
git merge --no-commit --no-ff <branch>
```

> **Note**: `--no-ff`ã¯ Fast Forward Mergeã‚’é¿ã‘ã€ãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆã‚’å¿…ãšæ®‹ã—ã¾ã™ã€‚è¿½è·¡ãŒå®¹æ˜“ã«ãªã‚‹ãŸã‚æ¨å¥¨ã€‚

### ãƒãƒ¼ã‚¸ã®dry-runï¼ˆã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆç¢ºèªï¼‰

```bash
# ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã™ã‚‹ã‹ç¢ºèªã§ãã‚‹ï¼ˆå®Ÿéš›ã«ã¯ãƒãƒ¼ã‚¸ã—ãªã„ï¼‰
git merge --no-commit --no-ff <branch>
```

### ãƒãƒ¼ã‚¸å–ã‚Šæ¶ˆã—

```bash
git merge --abort
```

---

## Rebaseæ“ä½œ

### ä½œæ¥­ãƒ–ãƒ©ãƒ³ãƒã«è¦ªãƒ–ãƒ©ãƒ³ãƒã®å¤‰æ›´ã‚’å–ã‚Šè¾¼ã‚€

```bash
# 1. è¦ªãƒ–ãƒ©ãƒ³ãƒã‚’æœ€æ–°åŒ–
git checkout <è¦ªãƒ–ãƒ©ãƒ³ãƒ> && git pull

# 2. ä½œæ¥­ãƒ–ãƒ©ãƒ³ãƒã«åˆ‡ã‚Šæ›¿ãˆ
git switch <ä½œæ¥­ãƒ–ãƒ©ãƒ³ãƒ>

# 3. è¦ªãƒ–ãƒ©ãƒ³ãƒã®å¤‰æ›´ã‚’å–ã‚Šè¾¼ã‚€
git rebase <è¦ªãƒ–ãƒ©ãƒ³ãƒ>
```

### Rebaseå–ã‚Šæ¶ˆã—

```bash
git rebase --abort
```

### Rebaseã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆè§£æ¶ˆ

å‚è€ƒ: [Rebaseã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆè§£æ¶ˆã®å‚è€ƒ](https://zenn.dev/mikaneko/articles/0fe1daf2e8a987)

---

## ãã®ä»–ã®ä¾¿åˆ©ãªã‚³ãƒãƒ³ãƒ‰

### ã‚¨ã‚¤ãƒªã‚¢ã‚¹è¨­å®šä¾‹

```bash
# .gitconfigã«è¨­å®šã™ã‚‹ä¾‹
bc = branch
cnt = rev-list --count
rv = revert
st = stash
sta = stash apply
stl = stash list --date=local
stf = stash push --
mg = merge --no-commit --no-ff
```

---

## é–¢é€£ãƒªãƒ³ã‚¯

- [Rebaseã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆè§£æ¶ˆã®å‚è€ƒ](https://zenn.dev/mikaneko/articles/0fe1daf2e8a987)
